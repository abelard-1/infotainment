<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Info-Kiosk Staffanstorp</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #1a1a1a;
            color: white;
            margin: 0;
            display: flex;
            flex-direction: column;
            height: 100vh;
            overflow: hidden;
        }
        .container {
            display: grid;
            grid-template-columns: 1fr 2fr;
            grid-template-rows: auto 1fr;
            gap: 20px;
            padding: 20px;
            height: 100%;
        }
        #clock-section {
            grid-column: 1 / 2;
            text-align: center;
            background: #2a2a2a;
            padding: 20px;
            border-radius: 15px;
        }
        #time { font-size: 4rem; font-weight: bold; margin: 0; }
        #date { font-size: 1.5rem; color: #aaa; }

        #weather-section {
            grid-column: 1 / 2;
            background: #2a2a2a;
            padding: 20px;
            border-radius: 15px;
            overflow-y: auto;
        }
        .forecast-day {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #444;
        }

        #calendar-section {
            grid-column: 2 / 3;
            grid-row: 1 / 3;
            background: #fff;
            border-radius: 15px;
            overflow: hidden;
        }
        iframe { width: 100%; height: 100%; border: none; }
    </style>
</head>
<body>

<div class="container">
    <div id="clock-section">
        <div id="time">00:00</div>
        <div id="date">Måndag 1 Januari</div>
    </div>

    <div id="weather-section">
        <h3>Väder: Staffanstorp</h3>
        <div id="weather-list">Laddar väder...</div>
    </div>

    <div id="calendar-section">
        <iframe src="https://calendar.google.com/calendar/embed?src=rezgarhayder%40gmail.com&ctz=Europe%2FStockholm"></iframe>
    </div>
</div>

<script>
    // Klock-funktion
    function updateClock() {
        const now = new Date();
        const timeStr = now.toLocaleTimeString('sv-SE', { hour: '2-digit', minute: '2-digit' });
        const dateStr = now.toLocaleDateString('sv-SE', { weekday: 'long', day: 'numeric', month: 'long' });
        
        document.getElementById('time').textContent = timeStr;
        document.getElementById('date').textContent = dateStr.charAt(0).toUpperCase() + dateStr.slice(1);
    }
    setInterval(updateClock, 1000);
    updateClock();

    // Väder-funktion (Staffanstorp: Lat 55.64, Lon 13.21)
    async function updateWeather() {
        try {
            const response = await fetch('https://api.open-meteo.com/v1/forecast?latitude=55.64&longitude=13.21&daily=temperature_2m_max,temperature_2m_min,weathercode&timezone=Europe%2FBerlin');
            const data = await response.json();
            const list = document.getElementById('weather-list');
            list.innerHTML = '';

            for (let i = 0; i < 7; i++) {
                const date = new Date(data.daily.time[i]).toLocaleDateString('sv-SE', { weekday: 'short' });
                const max = Math.round(data.daily.temperature_2m_max[i]);
                const min = Math.round(data.daily.temperature_2m_min[i]);
                
                list.innerHTML += `
                    <div class="forecast-day">
                        <span>${date}</span>
                        <span>${max}° / ${min}°</span>
                    </div>`;
            }
        } catch (error) {
            document.getElementById('weather-list').textContent = "Kunde inte ladda väder.";
        }
    }
    updateWeather();
    setInterval(updateWeather, 1800000); // Uppdatera var 30:e minut
</script>

</body>
</html>
