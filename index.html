<header class="top-bar glass-panel">
    <div>
        <div id="mini-date" style="font-size: 0.9rem; color: var(--accent); text-transform: uppercase; font-weight: 600;">Laddar...</div>
        <div id="mini-clock" style="font-size: 4rem; font-weight: 900; line-height: 1;">00:00</div>
    </div>
    
    <div id="header-hourly"></div>
    
    <div class="current-details">
        <div style="font-size: 0.7rem; opacity: 0.5; letter-spacing: 2px; font-weight: 800; margin-bottom: -2px;">IMORGON MAX</div>
        <div id="tom-temp" style="font-weight: 900; font-size: 2.2rem; line-height: 1;">--°</div>
        <div style="display: flex; gap: 12px; margin-top: 4px;">
            <div class="detail-item"><i data-lucide="wind" style="width:12px;"></i> <span id="cur-wind">-- m/s</span></div>
            <div class="detail-item"><i data-lucide="droplets" style="width:12px;"></i> <span id="cur-hum">-- %</span></div>
        </div>
    </div>
</header>

<script>
    // ... (behåll dina API-nycklar och övriga funktioner) ...

    async function updateWeather() {
        try {
            const res = await fetch('https://api.open-meteo.com/v1/forecast?latitude=55.64&longitude=13.21&current=temperature_2m,relative_humidity_2m,wind_speed_10m&hourly=temperature_2m,weathercode,precipitation_probability&daily=temperature_2m_max&timezone=auto');
            const data = await res.json();
            
            // Nuvarande detaljer & Imorgon (index 1 i daily för imorgon)
            document.getElementById('cur-wind').innerText = Math.round(data.current.wind_speed_10m) + ' m/s';
            document.getElementById('cur-hum').innerText = data.current.relative_humidity_2m + ' %';
            document.getElementById('tom-temp').innerText = Math.round(data.daily.temperature_2m_max[1]) + '°';

            // Timprognos
            const hIdx = new Date().getHours();
            let hHtml = '';
            for(let i=1; i<=5; i++) {
                const idx = hIdx + i;
                const time = new Date(data.hourly.time[idx]).getHours() + ':00';
                const code = data.hourly.weathercode[idx];
                const pop = data.hourly.precipitation_probability[idx];
                const icon = code <= 3 ? 'sun' : (code >= 71 ? 'snowflake' : 'cloud-rain');
                hHtml += `
                <div class="weather-node">
                    <div class="w-time">${time}</div>
                    <i data-lucide="${icon}" class="weather-icon"></i>
                    <div class="w-temp">${Math.round(data.hourly.temperature_2m[idx])}°</div>
                    <div class="w-pop">${pop > 0 ? '<i data-lucide="umbrella" style="width:10px"></i>' + pop + '%' : ''}</div>
                </div>`;
            }
            document.getElementById('header-hourly').innerHTML = hHtml;
            lucide.createIcons();
        } catch(e) { console.error("Väderfel:", e); }
    }
    // ... resten av funktionerna ...
</script>
